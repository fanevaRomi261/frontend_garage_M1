<body class="bg-body-tertiary">
  <!-- ### debut menu horizontal ### !-->
  <aside
    class="collapse show collapse-horizontal col-sm-2 p-3 border-end bg-body-tertiary"
    id="collapseWidthExample"
  >
    <a style="display: flex; align-items: center">
      <span style="display: flex; justify-content: center; width: 100%">
        <img src="assets/img/logo_v2.png" alt="logo" height="80" width="110" />
      </span>
    </a>

    <hr />

    <ul class="nav nav-pills flex-column mb-auto">
      <li class="nav-item">
        <a routerLink="/accueil" class="nav-link link-body-emphasis" aria-current="page">
          <p class="bi bi-house-door" style="position:fixed;"> Accueil</p>
          <br>
        </a>
      </li>
      <li *ngIf="hasAccessToMenu(['manager'])">
        <a routerLink="/dashboard-manager" class="nav-link link-body-emphasis">
          <p class="bi bi-graph-up" style="position:fixed;"> Tableau de bord</p>
          <br>
        </a>
      </li>
      <li *ngIf="hasAccessToMenu(['client'])">
        <a routerLink="/vehicule-client" class="nav-link link-body-emphasis">
          <p class="bi bi-car-front-fill" style="position:fixed;"> Mes véhicules</p>
          <br>
        </a>
      </li>
      <li *ngIf="hasAccessToMenu(['manager'])">
        <a routerLink="/entree-stock" class="nav-link link-body-emphasis">
          <p class="bi bi-plus-square" style="position:fixed;"> Entrée de stock de pièce</p>
          <br>
        </a>
      </li>
      <li *ngIf="hasAccessToMenu(['manager'])">
        <a routerLink="/etat-stock" class="nav-link link-body-emphasis">
          <p class="bi bi-box-seam" style="position:fixed;"> Etat de stock de pièce</p>
          <br>
        </a>
      </li>
      <li *ngIf="hasAccessToMenu(['manager'])">
        <a routerLink="/gestion-mecanicien" class="nav-link link-body-emphasis">
          <p class="bi bi-wrench" style="position:fixed;"> Gestion mécanicien</p>
          <br>
        </a>
      </li>

      <li *ngIf="hasAccessToMenu(['manager','mécanicien'])">
        <a routerLink="/agenda-mecanicien" class="nav-link link-body-emphasis">
          <p class="bi bi-calendar" style="position:fixed;"> Agenda mécanicien</p>
          <br>  
        </a>
      </li>
      
      <li *ngIf="hasAccessToMenu(['client'])">
        <a routerLink="/planning" class="nav-link link-body-emphasis">
          <p class="bi bi-calendar-check" style="position:fixed;"> Prendre rendez-vous</p>
          <br>
        </a>
      </li>
      <li *ngIf="hasAccessToMenu(['manager'])">
        <a routerLink="/gestion-piece" class="nav-link link-body-emphasis">
          <p class="bi bi-gear" style="position:fixed;"> Gestion pièce</p>
          <br>
        </a>
      </li>
      <li *ngIf="hasAccessToMenu(['client'])">
        <a routerLink="/liste-rdv-client" class="nav-link link-body-emphasis">
          <p class="bi bi-person-lines-fill" style="position:fixed;"> Mes rendez-vous</p>

          <br>
        </a>
      </li>
    </ul>

    <hr />

    <div class="dropdown py-2">
      <img
        src="assets/img/utilisateur.png"
        alt=""
        width="30"
        height="30"
        class="rounded-circle me-2"
      />
      <span class="d-print-block">Faneva - ETU 001866</span>
    </div>
    <div class="dropdown py-2">
      <img
        src="assets/img/utilisateur.png"
        alt=""
        width="30"
        height="30"
        class="rounded-circle me-2"
      />
      <span class="d-print-block">Ismaël - ETU 002219</span>
    </div>
  </aside>
  <!-- ### fin menu horizontal #### !-->

  <!-- ### debut main content #### !-->
  <main
    class="col-sm-10 bg-body-tertiary"
    [ngClass]="{ 'col-sm-10': !isExpanded, 'col-sm-12': isExpanded }"
  >
    <!-- ### debut navbar #### !-->
    <nav
      class="navbar sticky-top navbar-expand-lg border-bottom bg-body-tertiary"
    >
      <div class="container-fluid">
        <button
          class="btn btn-outline-secondary"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#collapseWidthExample"
          aria-expanded="true"
          aria-controls="collapseWidthExample"
          style="margin-right: 10px; padding: 0px 5px 0px 5px"
          id="sidebartoggle"
          (click)="changeClass()"
        >
          <i class="bi bi-arrows-expand-vertical"></i>
        </button>

        <button
          class="btn btn-outline-secondary"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasExample"
          aria-controls="offcanvasExample"
          style="margin-right: 10px; padding: 2px 6px 2px 6px"
          id="sidebarshow"
        >
          <i class="bi bi-arrow-bar-right"></i>
        </button>

        <a class="text-decoration-none">Garage</a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="true"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNavDarkDropdown"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDarkDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  <img
                    src="assets/img/utilisateur.png"
                    alt="Profile"
                    width="30"
                    height="30"
                    class="rounded-circle me-2"
                  />
                  {{ user?.nom ?? 'AUCUNE INFO' }} {{ user?.prenom ?? '' }}
                </a>
                <ul
                  class="dropdown-menu dropdown-menu-end"
                  aria-labelledby="navbarDarkDropdownMenuLink"
                >
                  <ng-container *ngIf="user; else noUser">
                    <p class="m-2 text-center fw-bold">{{ user.nom }} {{ user.prenom }}</p>
                    <p class="m-2 text-center">{{ user.mail }}</p>
                    <p class="m-2 text-center">Profil : {{ user.profil_id.libelle }}</p>
                    <li>
                      <hr class="dropdown-divider" />
                    </li>
                    <li>
                      <a class="dropdown-item" (click)="logout()">
                        <i class="bi bi-box-arrow-right me-2"></i>Log out
                      </a>
                    </li>
                  </ng-container>
                  <ng-template #noUser>
                    <p class="m-2 text-center text-muted">AUCUNE INFO</p>
                  </ng-template>
                </ul>
              </li>
            </ul>
          </div>
          
        </div>
      </div>
    </nav>
    <!-- ### fin navbar #### !-->

    <!-- ### debut template ### !-->
    <div class="container-fluid">
      <div class="row"></div>

      <!-- debut contenu ici -->
      <!-- ici le contenu -->
      <router-outlet></router-outlet>
      <!-- fin contenu ici -->

      <!-- footer -->
      <div class="row mt-5">
        <footer class="bg-dark text-white py-4 text-center">
          <div class="container">
            <div class="row">
              <div class="col-md-12">
                <h5>Réalisateurs</h5>
                <p>
                  ETU001866 - RANDRIANARISON Mitia Rindrafaneva Romi
                  <br />
                  ETU002219 - RAVELOSON Fitahiana Ismaël
                </p>
              </div>
            </div>
          </div>
        </footer> 
      </div>

    </div>
    <!-- ### fin template ### !-->
  </main>

  <!-- pour ecran kely de miova le sidebar -->
  <div
    class="offcanvas offcanvas-start"
    data-bs-scroll="true"
    tabindex="-1"
    id="offcanvasExample"
    aria-labelledby="offcanvasExampleLabel"
  >
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasExampleLabel">Garage</h5>
      <button
        type="button"
        class="btn-close"
        data-bs-dismiss="offcanvas"
        aria-label="Close"
      ></button>
    </div>
    <div class="offcanvas-body">
      <hr />
      <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
          <a routerLink="/accueil" class="nav-link link-body-emphasis" aria-current="page">
            <p class="bi bi-house-door" style="position: fixed">Accueil</p>
            <br />
          </a>
        </li>
        <li *ngIf="hasAccessToMenu(['manager'])">
          <a routerLink="/dashboard-manager" class="nav-link link-body-emphasis">
            <p class="bi bi-graph-up" style="position:fixed;"> Tableau de bord</p>
            <br>
          </a>
        </li>
        <li *ngIf="hasAccessToMenu(['client'])">
          <a routerLink="/vehicule-client" class="nav-link link-body-emphasis">
            <p class="bi bi-car-front-fill" style="position:fixed;"> Mes véhicules</p>
            <br>
          </a>
        </li>
        <li *ngIf="hasAccessToMenu(['manager'])">
          <a routerLink="/entree-stock" class="nav-link link-body-emphasis">
            <p class="bi bi-plus-square" style="position:fixed;"> Entrée de stock de pièce</p>
            <br>
          </a>
        </li>
        <li *ngIf="hasAccessToMenu(['manager'])">
          <a routerLink="/etat-stock" class="nav-link link-body-emphasis">
            <p class="bi bi-box-seam" style="position:fixed;"> Etat de stock de pièce</p>
            <br>
          </a>
        </li>
        <li *ngIf="hasAccessToMenu(['manager'])">
          <a routerLink="/gestion-mecanicien" class="nav-link link-body-emphasis">
            <p class="bi bi-wrench" style="position:fixed;"> Gestion mécanicien</p>
            <br>
          </a>
        </li>
        <li *ngIf="hasAccessToMenu(['manager','mécanicien'])">
          <a routerLink="/agenda-mecanicien" class="nav-link link-body-emphasis">
            <p class="bi bi-calendar" style="position:fixed;"> Agenda mécanicien</p>
            <br>  
          </a>
        </li>
        <li *ngIf="hasAccessToMenu(['client'])">
          <a routerLink="/planning" class="nav-link link-body-emphasis">
            <p class="bi bi-calendar-check" style="position:fixed;"> Prendre rendez-vous</p>
            <br>
          </a>
        </li>
        <li *ngIf="hasAccessToMenu(['manager'])">
          <a routerLink="/gestion-piece" class="nav-link link-body-emphasis">
            <p class="bi bi-gear" style="position:fixed;"> Gestion pièce</p>
            <br>
          </a>
        </li>
        <li *ngIf="hasAccessToMenu(['client'])">
          <a routerLink="/liste-rdv-client" class="nav-link link-body-emphasis">
            <p class="bi bi-person-lines-fill" style="position:fixed;"> Mes rendez-vous</p>
            <br>
          </a>
        </li>
      </ul>
      <hr />
      <div class="dropdown py-2">
        <img
          src="assets/img/utilisateur.png"
          alt=""
          width="30"
          height="30"
          class="rounded-circle me-2"
        />
        <span class="d-print-block">Faneva - ETU 001866</span>
      </div>
      <div class="dropdown py-2">
        <img
          src="assets/img/utilisateur.png"
          alt=""
          width="30"
          height="30"
          class="rounded-circle me-2"
        />
        <span class="d-print-block">Ismaël - ETU 002219</span>
      </div>
    </div>
  </div>

  <!-- ### fin main #### !-->
</body>
